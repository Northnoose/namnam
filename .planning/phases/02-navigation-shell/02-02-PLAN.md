---
phase: 02-navigation-shell
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/CallBar.tsx
  - src/app/globals.css
  - src/app/layout.tsx
  - src/app/page.tsx
autonomous: true
requirements: [NAV-04, NAV-05]

must_haves:
  truths:
    - "A fixed orange bar is visible at the bottom of the screen on mobile at all scroll positions"
    - "Tapping the mobile call bar initiates a phone call to 41 23 22 19"
    - "The call bar is hidden on desktop (lg+) â€” desktop phone is in the navbar (Plan 01)"
    - "Clicking a section anchor link scrolls smoothly to the target section with the heading fully visible below the sticky navbar"
    - "Page has four placeholder sections with correct ids (om-oss, meny, levering, kontakt) for anchor navigation testing"
    - "Page content bottom has padding to prevent footer/content from being obscured by the fixed call bar on mobile"
  artifacts:
    - path: "src/components/CallBar.tsx"
      provides: "Fixed mobile-only call bar with tel: link"
      exports: ["CallBar"]
      min_lines: 15
    - path: "src/app/globals.css"
      provides: "scroll-behavior: smooth + scroll-padding-top: 80px on html element"
      contains: "scroll-padding-top"
    - path: "src/app/layout.tsx"
      provides: "data-scroll-behavior attribute on html, CallBar mounted in layout"
      contains: "data-scroll-behavior"
    - path: "src/app/page.tsx"
      provides: "Placeholder sections with anchor ids for Phase 2 testing"
      contains: "id=\"om-oss\""
  key_links:
    - from: "src/app/layout.tsx"
      to: "src/components/CallBar.tsx"
      via: "import and render inside ThemeProvider"
      pattern: "CallBar"
    - from: "src/app/globals.css"
      to: "html element"
      via: "CSS scroll-padding-top and scroll-behavior"
      pattern: "scroll-padding-top.*80px"
    - from: "src/app/layout.tsx"
      to: "html element"
      via: "data-scroll-behavior attribute"
      pattern: "data-scroll-behavior"
---

<objective>
Implement the mobile sticky call bar (CallBar.tsx), smooth scroll CSS, Next.js scroll-behavior attribute, and placeholder anchor sections so that NAV-04 and NAV-05 are satisfied and can be tested immediately.

Purpose: These four files are independent of Navbar.tsx (Plan 01) and can execute in the same wave. Grouping NAV-04 and NAV-05 together makes sense because both touch layout.tsx and concern the page's scroll/navigation infrastructure.
Output: CallBar component, scroll CSS, layout wired up, four placeholder anchor sections.
</objective>

<execution_context>
@/Users/steffen/.claude/get-shit-done/workflows/execute-plan.md
@/Users/steffen/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-navigation-shell/02-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create CallBar.tsx and wire into layout.tsx</name>
  <files>src/components/CallBar.tsx, src/app/layout.tsx</files>
  <action>
**1. Create `src/components/CallBar.tsx`:**

```tsx
// src/components/CallBar.tsx
// NAV-04: Fixed call bar â€” bottom on mobile, hidden on desktop (desktop phone is in navbar)
export const CallBar = () => (
  <a
    href="tel:+4741232219"
    className="lg:hidden fixed bottom-0 left-0 z-40 w-full
               flex items-center justify-center gap-2
               bg-orange-600 hover:bg-orange-500
               text-white font-bold py-4
               transition-colors duration-200"
    aria-label="Ring oss pÃ¥ 41 23 22 19"
  >
    ðŸ“ž Ring oss: 41 23 22 19
  </a>
);
```

Key design decisions:
- `lg:hidden` â€” hidden on desktop because the desktop phone button is in the navbar (Plan 01). NAV-04 requirement "top on desktop" is satisfied by the sticky navbar phone CTA.
- `fixed bottom-0` â€” always visible regardless of scroll position on mobile.
- `z-40` â€” below navbar (`z-50`) so the navbar draws on top.
- `aria-label` â€” accessible label for screen readers.
- No `import` needed â€” pure JSX, no external dependencies.

**2. Update `src/app/layout.tsx`:**

Add import for CallBar after the PopupWidget import:
```tsx
import { CallBar } from "@/components/CallBar";
```

Add `<CallBar />` inside the ThemeProvider, after `<Footer />` and before `<PopupWidget />`:
```tsx
<ThemeProvider attribute="class" defaultTheme="dark" enableSystem={false}>
  <Navbar />
  <div className="pb-16 lg:pb-0">{children}</div>
  <Footer />
  <CallBar />
  <PopupWidget />
</ThemeProvider>
```

The `pb-16 lg:pb-0` on the children wrapper reserves 64px of bottom padding on mobile to prevent page content from being obscured by the fixed call bar. This padding is removed on desktop (lg:pb-0).

CRITICAL: Do NOT remove `suppressHydrationWarning` from the `<html>` tag â€” it was set in Phase 1 and must remain.
  </action>
  <verify>
    <automated>cd /Users/steffen/Desktop/Projects/website_template && npx tsc --noEmit 2>&1 | head -30</automated>
    <manual>
      Confirm CallBar.tsx exists and exports `CallBar`.
      Confirm layout.tsx imports CallBar and renders it inside ThemeProvider.
      Confirm children wrapper has `pb-16 lg:pb-0`.
    </manual>
  </verify>
  <done>
    `src/components/CallBar.tsx` exists and exports a fixed orange `<a href="tel:+4741232219">` element. `layout.tsx` imports and renders `CallBar`. TypeScript compiles clean.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add scroll CSS to globals.css, data-scroll-behavior to layout.tsx html tag, and placeholder anchor sections to page.tsx</name>
  <files>src/app/globals.css, src/app/layout.tsx, src/app/page.tsx</files>
  <action>
**1. Update `src/app/globals.css`:**

Add `scroll-padding-top` and `scroll-behavior` to the `html` selector inside the existing `@layer base` block. The existing rule applies to `html, body` â€” split it so `html` gets the scroll properties without `body` inheriting them:

```css
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    scroll-padding-top: 80px;
    scroll-behavior: smooth;
    @apply dark:bg-trueGray-900;
  }
  body {
    @apply dark:bg-trueGray-900;
  }
}
```

Why `80px`: The sticky navbar renders at approximately 64px tall (logo 60px on mobile + py-4 padding). 80px adds ~16px of extra clearance so section headings are comfortably below the navbar after anchor navigation. This value matches the decision recorded in STATE.md.

**2. Update `src/app/layout.tsx` `<html>` tag:**

Add `data-scroll-behavior="smooth"` attribute. The final `<html>` tag must be:
```tsx
<html lang="nb" suppressHydrationWarning data-scroll-behavior="smooth">
```

Do NOT remove `lang="nb"` (Phase 1 decision) or `suppressHydrationWarning` (required by next-themes). Only add the new attribute.

**3. Update `src/app/page.tsx`:**

Replace the entire file contents with a minimal page that has the four anchor sections. The old template content (Benefits, Video, Testimonials, Faq, Cta, SectionTitle, etc.) is removed because it belongs to the upstream template, not to Nam Nam. Phase 3 will populate real content. Keep the Container wrapper.

```tsx
import { Container } from "@/components/Container";

export default function Home() {
  return (
    <Container>
      {/* Phase 2: anchor targets â€” real content added in Phase 3 */}
      <section id="om-oss" className="min-h-[300px] flex items-center justify-center py-16">
        <p className="text-gray-500 text-lg">Om oss â€” klar i Phase 3</p>
      </section>

      <section id="meny" className="min-h-[300px] flex items-center justify-center py-16">
        <p className="text-gray-500 text-lg">Meny â€” klar i Phase 3</p>
      </section>

      <section id="levering" className="min-h-[300px] flex items-center justify-center py-16">
        <p className="text-gray-500 text-lg">Levering â€” klar i Phase 3</p>
      </section>

      <section id="kontakt" className="min-h-[300px] flex items-center justify-center py-16">
        <p className="text-gray-500 text-lg">Kontakt â€” klar i Phase 3</p>
      </section>
    </Container>
  );
}
```

CRITICAL: Each `<section>` must have the exact `id` value shown â€” these are the anchor targets that navbar links point to (`#om-oss`, `#meny`, `#levering`, `#kontakt`). Phase 3 will replace the placeholder `<p>` content but keep the section ids.
  </action>
  <verify>
    <automated>cd /Users/steffen/Desktop/Projects/website_template && npx tsc --noEmit 2>&1 | head -30</automated>
    <manual>
      Confirm globals.css has `scroll-padding-top: 80px` and `scroll-behavior: smooth` on html.
      Confirm layout.tsx html tag has `data-scroll-behavior="smooth"`.
      Confirm page.tsx has four sections with ids: om-oss, meny, levering, kontakt.
    </manual>
  </verify>
  <done>
    `globals.css` sets `scroll-padding-top: 80px` and `scroll-behavior: smooth` on `html`. `layout.tsx` `<html>` tag has `data-scroll-behavior="smooth"` alongside existing `lang="nb"` and `suppressHydrationWarning`. `page.tsx` has four placeholder sections with correct anchor ids. TypeScript compiles clean.
  </done>
</task>

</tasks>

<verification>
After both tasks complete:
1. `npx tsc --noEmit` exits with 0 errors
2. `grep -n "scroll-padding-top" src/app/globals.css` returns `scroll-padding-top: 80px`
3. `grep -n "data-scroll-behavior" src/app/layout.tsx` returns a match
4. `grep -n "CallBar" src/app/layout.tsx` returns import and render matches
5. `grep -n 'id="om-oss"\|id="meny"\|id="levering"\|id="kontakt"' src/app/page.tsx` returns all four matches
6. `grep -n "pb-16" src/app/layout.tsx` returns a match on the children wrapper
</verification>

<success_criteria>
- `src/components/CallBar.tsx` exists with fixed orange tel: link, `lg:hidden`, `z-40`
- `src/app/globals.css` has `scroll-padding-top: 80px` and `scroll-behavior: smooth` on html
- `src/app/layout.tsx` html tag has `data-scroll-behavior="smooth"`, CallBar is rendered
- `src/app/page.tsx` has four placeholder sections with anchor ids
- TypeScript clean across all modified files
</success_criteria>

<output>
After completion, create `.planning/phases/02-navigation-shell/02-02-SUMMARY.md` using the summary template.
</output>
