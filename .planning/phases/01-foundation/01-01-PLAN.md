---
phase: 01-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/app/layout.tsx
  - src/components/Navbar.tsx
autonomous: true
requirements:
  - FOUND-01
  - FOUND-02
  - FOUND-03

must_haves:
  truths:
    - "Page loads with a dark background on first visit — no white flash visible even in Incognito"
    - "Browser dev tools show <html lang=\"nb\"> in the DOM"
    - "Nam Nam logo renders in the navbar using the PNG file, not the placeholder SVG/text"
    - "Logo renders without layout shift (intrinsic 1:1 aspect ratio preserved)"
  artifacts:
    - path: "src/app/layout.tsx"
      provides: "ThemeProvider with defaultTheme=dark, enableSystem=false, and lang=nb"
      contains: "defaultTheme=\"dark\" enableSystem={false}"
    - path: "src/components/Navbar.tsx"
      provides: "Logo rendered via next/image from /img/NamNamPizza&Grill.png"
      contains: "NamNamPizza&Grill.png"
  key_links:
    - from: "src/app/layout.tsx"
      to: "ThemeProvider"
      via: "next-themes prop"
      pattern: "defaultTheme=\"dark\""
    - from: "src/components/Navbar.tsx"
      to: "/img/NamNamPizza&Grill.png"
      via: "next/image src prop"
      pattern: "NamNamPizza&Grill\\.png"
---

<objective>
Fix the technical shell: eliminate the FOUC (white flash on load), set the correct Norwegian language attribute, and replace the placeholder logo with the actual Nam Nam PNG using next/image.

Purpose: Every subsequent phase builds on top of these layout fundamentals. A white flash on load or wrong language tag would persist into production if not fixed here.
Output: Modified layout.tsx and Navbar.tsx — no new files.
</objective>

<execution_context>
@/Users/steffen/.claude/get-shit-done/workflows/execute-plan.md
@/Users/steffen/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix layout.tsx — FOUC prevention and Norwegian language attribute</name>
  <files>src/app/layout.tsx</files>
  <action>
Make exactly two changes to `src/app/layout.tsx`:

1. Change `<html lang="en"` to `<html lang="nb"` on line 24. (`nb` = Norwegian Bokmål — more precise than `no`; screen readers use this for correct pronunciation)

2. Change `<ThemeProvider attribute="class">` to `<ThemeProvider attribute="class" defaultTheme="dark" enableSystem={false}>`.

Why `enableSystem={false}`: Without it, next-themes reads `prefers-color-scheme` — on a light-mode OS this causes a white flash before hydration sets the dark class. `defaultTheme="dark"` + `enableSystem={false}` forces dark immediately. The `suppressHydrationWarning` already on `<html>` suppresses the React hydration warning from this SSR/client class difference.

Do NOT change anything else in this file (metadata, font, imports, children structure).

Final relevant section should look like:
```tsx
<html lang="nb" suppressHydrationWarning>
  <body className={inter.className}>
    <ThemeProvider attribute="class" defaultTheme="dark" enableSystem={false}>
      <Navbar />
      <div>{children}</div>
      <Footer />
      <PopupWidget />
    </ThemeProvider>
  </body>
</html>
```
  </action>
  <verify>
    <automated>cd /Users/steffen/Desktop/Projects/website_template && grep -n 'lang="nb"' src/app/layout.tsx && grep -n 'defaultTheme="dark"' src/app/layout.tsx && grep -n 'enableSystem={false}' src/app/layout.tsx</automated>
    <manual>All three grep commands must return matches. If any returns empty, the fix is incomplete.</manual>
  </verify>
  <done>layout.tsx has lang="nb", ThemeProvider has defaultTheme="dark" and enableSystem={false}. TypeScript compiles without errors (npx tsc --noEmit).</done>
</task>

<task type="auto">
  <name>Task 2: Replace navbar logo — next/image with NamNamPizza&Grill.png</name>
  <files>src/components/Navbar.tsx</files>
  <action>
Replace the logo block inside the `<Link href="/">` in Navbar.tsx. The current logo renders `logo.svg` at 32x32 alongside a `[COMPANY_NAME]` text span. Replace the entire `<span className="flex items-center ...">` with a direct `next/image` call.

The PNG is confirmed at 1024x1024 pixels (square). For the navbar, display at 120px:

```tsx
<Link href="/">
  <Image
    src="/img/NamNamPizza&Grill.png"
    alt="Nam Nam Pizza & Grill"
    width={120}
    height={120}
    priority
    className="w-[120px] h-auto"
  />
</Link>
```

Key points:
- `width={120} height={120}` — intrinsic hint preserving 1:1 aspect ratio (prevents CLS). These are NOT display pixels — CSS className controls display size.
- `priority` — disables lazy loading; the navbar logo is above the fold (LCP candidate).
- Remove the old `<span>[COMPANY_NAME]</span>` text — the PNG logo replaces it entirely.
- `Image` import already exists at line 4 (`import Image from "next/image"`).
- Do NOT touch any other part of Navbar.tsx (navigation array, Disclosure, menu links, ThemeChanger, CTA button).

After the change, also check if `p-8` padding on the nav element will overflow at 320px. The nav element is: `<nav className="container relative flex flex-wrap items-center justify-between p-8 mx-auto lg:justify-between xl:px-1">`. With a 120px logo at 320px viewport (320 - 64 padding = 256px remaining), this should fit alongside the hamburger button. If it overflows visually when tested in Task 3 (Plan 03), the fix is `p-4 lg:p-8` — but make that change only if needed.
  </action>
  <verify>
    <automated>cd /Users/steffen/Desktop/Projects/website_template && grep -n 'NamNamPizza' src/components/Navbar.tsx && grep -n 'priority' src/components/Navbar.tsx && ! grep -n 'COMPANY_NAME' src/components/Navbar.tsx</automated>
    <manual>Three checks: (1) NamNamPizza&Grill.png referenced, (2) priority prop present, (3) [COMPANY_NAME] placeholder removed.</manual>
  </verify>
  <done>Navbar.tsx references /img/NamNamPizza&Grill.png via next/image with width=120, height=120, priority. [COMPANY_NAME] text span removed. No TypeScript errors.</done>
</task>

</tasks>

<verification>
After both tasks:
```bash
cd /Users/steffen/Desktop/Projects/website_template
npx tsc --noEmit
```
Must complete with zero errors.

```bash
grep 'lang="nb"' src/app/layout.tsx
grep 'defaultTheme="dark"' src/app/layout.tsx
grep 'enableSystem={false}' src/app/layout.tsx
grep 'NamNamPizza' src/components/Navbar.tsx
```
All four must return matches.

To verify FOUC fix manually: `npm run dev`, open http://localhost:3000 in an Incognito window, hard reload (Ctrl+Shift+R). No white flash should be visible on load.
</verification>

<success_criteria>
- `src/app/layout.tsx` has `lang="nb"` and `ThemeProvider` with `defaultTheme="dark" enableSystem={false}`
- `src/components/Navbar.tsx` shows the Nam Nam PNG logo via `next/image` with `priority`
- `npx tsc --noEmit` exits 0
- No white flash on first load (dark background immediately visible)
- Browser inspector shows `<html lang="nb">`
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-01-SUMMARY.md`
</output>
